<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMAUG: smaug::smv::bn::TilingOptimizer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SMAUG
   </div>
   <div id="projectbrief">Simulating Machine Learning Applications on gem5-Aladdin</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesmaug.html">smaug</a></li><li class="navelem"><a class="el" href="namespacesmaug_1_1smv.html">smv</a></li><li class="navelem"><a class="el" href="namespacesmaug_1_1smv_1_1bn.html">bn</a></li><li class="navelem"><a class="el" href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html">TilingOptimizer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">smaug::smv::bn::TilingOptimizer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Tiling optimizer for SMV batch norm kernel.  
 <a href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="smv__batch__norm__tiling_8h_source.html">smv_batch_norm_tiling.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for smaug::smv::bn::TilingOptimizer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.png" usemap="#smaug::smv::bn::TilingOptimizer_map" alt=""/>
  <map id="smaug::smv::bn::TilingOptimizer_map" name="smaug::smv::bn::TilingOptimizer_map">
<area href="classsmaug_1_1smv_1_1TilingOptimizerBase.html" alt="smaug::smv::TilingOptimizerBase" shape="rect" coords="0,0,193,24"/>
  </map>
</div></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Tiling optimizer for SMV batch norm kernel. </p>

<p class="definition">Definition at line <a class="el" href="smv__batch__norm__tiling_8h_source.html#l00019">19</a> of file <a class="el" href="smv__batch__norm__tiling_8h_source.html">smv_batch_norm_tiling.h</a>.</p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a62a7f0f18e5535e4c98fb6bcae31e948"><td class="memItemLeft" align="right" valign="top">static std::array&lt; <a class="el" href="classsmaug_1_1TiledTensor.html">TiledTensor</a>, 3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html#a62a7f0f18e5535e4c98fb6bcae31e948">doTiling</a> (<a class="el" href="classsmaug_1_1SmvBatchNormOp.html">SmvBatchNormOp</a> *op)</td></tr>
<tr class="memdesc:a62a7f0f18e5535e4c98fb6bcae31e948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the tiling optimizer on the given batch norm op.  <a href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html#a62a7f0f18e5535e4c98fb6bcae31e948">More...</a><br /></td></tr>
<tr class="separator:a62a7f0f18e5535e4c98fb6bcae31e948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4cf7d70d2da8da3070da1b5ba89a3d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structsmaug_1_1smv_1_1TilingConfig.html">TilingConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html#a3d4cf7d70d2da8da3070da1b5ba89a3d">computeBasicTileShapes</a> (<a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *inputs, <a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *weights, <a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *outputs)</td></tr>
<tr class="memdesc:a3d4cf7d70d2da8da3070da1b5ba89a3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the best basic tiling shape for this batch norm layer.  <a href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html#a3d4cf7d70d2da8da3070da1b5ba89a3d">More...</a><br /></td></tr>
<tr class="separator:a3d4cf7d70d2da8da3070da1b5ba89a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a261da3e4b7ed9bb28f137a353266883d"><td class="memItemLeft" align="right" valign="top">static std::array&lt; <a class="el" href="namespacesmaug_1_1smv.html#a3570fbfb36362c2c1e52c12684656d09">TilingDims</a>, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html#a261da3e4b7ed9bb28f137a353266883d">determineBestTilingDims</a> (<a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *inputs, <a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *weights, int maxTileSize)</td></tr>
<tr class="memdesc:a261da3e4b7ed9bb28f137a353266883d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the best tiling dimensions for running batch norm on SMV.  <a href="classsmaug_1_1smv_1_1bn_1_1TilingOptimizer.html#a261da3e4b7ed9bb28f137a353266883d">More...</a><br /></td></tr>
<tr class="separator:a261da3e4b7ed9bb28f137a353266883d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92869e77aa832e9b982fa24b20b69e54"><td class="memItemLeft" align="right" valign="top"><a id="a92869e77aa832e9b982fa24b20b69e54"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>enumPostFCTilingConfigs</b> (<a class="el" href="classsmaug_1_1TensorShape.html">TensorShape</a> inputsShape, <a class="el" href="classsmaug_1_1TensorShape.html">TensorShape</a> weightsShape, int maxTileSize, std::array&lt; <a class="el" href="namespacesmaug_1_1smv.html#a3570fbfb36362c2c1e52c12684656d09">TilingDims</a>, 2 &gt; strategies, std::list&lt; <a class="el" href="structsmaug_1_1smv_1_1TilingConfig.html">TilingConfig</a> &gt; &amp;fullConfigs)</td></tr>
<tr class="separator:a92869e77aa832e9b982fa24b20b69e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c8eb321d21856c1e3abec7ebd2aa35e"><td class="memItemLeft" align="right" valign="top"><a id="a4c8eb321d21856c1e3abec7ebd2aa35e"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>enumPostConvTilingConfigs</b> (<a class="el" href="classsmaug_1_1TensorShape.html">TensorShape</a> inputsShape, <a class="el" href="classsmaug_1_1TensorShape.html">TensorShape</a> weightsShape, int maxTileSize, std::array&lt; <a class="el" href="namespacesmaug_1_1smv.html#a3570fbfb36362c2c1e52c12684656d09">TilingDims</a>, 2 &gt; strategies, std::list&lt; <a class="el" href="structsmaug_1_1smv_1_1TilingConfig.html">TilingConfig</a> &gt; &amp;fullConfigs)</td></tr>
<tr class="separator:a4c8eb321d21856c1e3abec7ebd2aa35e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3d4cf7d70d2da8da3070da1b5ba89a3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d4cf7d70d2da8da3070da1b5ba89a3d">&#9670;&nbsp;</a></span>computeBasicTileShapes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsmaug_1_1smv_1_1TilingConfig.html">TilingConfig</a> smaug::smv::bn::TilingOptimizer::computeBasicTileShapes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *&#160;</td>
          <td class="paramname"><em>outputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the best basic tiling shape for this batch norm layer. </p>
<p>The algorithm first determines the dimensions along which the inputs, weights, and outputs will be tiled. Then based on those dimensions, we enumerate all possible basic tile shapes for inputs, weights, and outputs. A <b>basic</b> shape is the shape that all but potentially the last tile along a set of dimensions will use. This triplet of tile shapes defines a <a class="el" href="structsmaug_1_1smv_1_1TilingConfig.html" title="A TilingConfig describes tiling strategies and optimal tile sizes for inputs, weights,...">TilingConfig</a>. The <a class="el" href="structsmaug_1_1smv_1_1TilingConfig.html" title="A TilingConfig describes tiling strategies and optimal tile sizes for inputs, weights,...">TilingConfig</a> that maximizes the total combined size of input, weights, and output tiles is chosen as the best.</p>
<p>This algorithm assumes that the maximum tile size for weights, inputs, and outputs are all the same and that they will reside in separate scratchpads (no sharing).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputs</td><td>Inputs tensor of the batch norm operator. </td></tr>
    <tr><td class="paramname">weights</td><td>A tensor that concatenates the four weights tensors of the batch norm operator. </td></tr>
    <tr><td class="paramname">outputs</td><td>Outputs tensor of the batch norm operator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="structsmaug_1_1smv_1_1TilingConfig.html" title="A TilingConfig describes tiling strategies and optimal tile sizes for inputs, weights,...">TilingConfig</a> that describes the best tiling shapes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="smv__batch__norm__tiling_8cpp_source.html#l00207">207</a> of file <a class="el" href="smv__batch__norm__tiling_8cpp_source.html">smv_batch_norm_tiling.cpp</a>.</p>

</div>
</div>
<a id="a261da3e4b7ed9bb28f137a353266883d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a261da3e4b7ed9bb28f137a353266883d">&#9670;&nbsp;</a></span>determineBestTilingDims()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; <a class="el" href="namespacesmaug_1_1smv.html#a3570fbfb36362c2c1e52c12684656d09">TilingDims</a>, 2 &gt; smaug::smv::bn::TilingOptimizer::determineBestTilingDims </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsmaug_1_1Tensor.html">Tensor</a> *&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxTileSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the best tiling dimensions for running batch norm on SMV. </p>
<p>Returns: A 2-element array of TilingDims enums (inputs, weights). </p>

<p class="definition">Definition at line <a class="el" href="smv__batch__norm__tiling_8cpp_source.html#l00013">13</a> of file <a class="el" href="smv__batch__norm__tiling_8cpp_source.html">smv_batch_norm_tiling.cpp</a>.</p>

</div>
</div>
<a id="a62a7f0f18e5535e4c98fb6bcae31e948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a7f0f18e5535e4c98fb6bcae31e948">&#9670;&nbsp;</a></span>doTiling()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; <a class="el" href="classsmaug_1_1TiledTensor.html">TiledTensor</a>, 3 &gt; smaug::smv::bn::TilingOptimizer::doTiling </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsmaug_1_1SmvBatchNormOp.html">SmvBatchNormOp</a> *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runs the tiling optimizer on the given batch norm op. </p>
<dl class="section return"><dt>Returns</dt><dd>An array of tiled inputs, weights, and outputs. </dd></dl>

<p class="definition">Definition at line <a class="el" href="smv__batch__norm__tiling_8cpp_source.html#l00260">260</a> of file <a class="el" href="smv__batch__norm__tiling_8cpp_source.html">smv_batch_norm_tiling.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>smaug/operators/smv/<a class="el" href="smv__batch__norm__tiling_8h_source.html">smv_batch_norm_tiling.h</a></li>
<li>smaug/operators/smv/<a class="el" href="smv__batch__norm__tiling_8cpp_source.html">smv_batch_norm_tiling.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
